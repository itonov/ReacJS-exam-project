{"ast":null,"code":"import _classCallCheck from \"D:\\\\Softuni\\\\JS-Web\\\\ReactJS\\\\ExamProject\\\\react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"D:\\\\Softuni\\\\JS-Web\\\\ReactJS\\\\ExamProject\\\\react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"D:\\\\Softuni\\\\JS-Web\\\\ReactJS\\\\ExamProject\\\\react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"D:\\\\Softuni\\\\JS-Web\\\\ReactJS\\\\ExamProject\\\\react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"D:\\\\Softuni\\\\JS-Web\\\\ReactJS\\\\ExamProject\\\\react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nimport _assertThisInitialized from \"D:\\\\Softuni\\\\JS-Web\\\\ReactJS\\\\ExamProject\\\\react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/assertThisInitialized\";\nvar _jsxFileName = \"D:\\\\Softuni\\\\JS-Web\\\\ReactJS\\\\ExamProject\\\\react-app\\\\src\\\\components\\\\DynamicUserForm\\\\DynamicUserForm.jsx\";\nimport React, { Component } from \"react\";\nimport Register from \"./Register/Register\";\nimport Login from \"./Login/Login\";\nimport { Grid, Snackbar, IconButton } from \"@material-ui/core\";\nimport { Close as CloseIcon } from '@material-ui/icons';\nimport SnackbarWrapper from \"../SnackbarWrapper/SnackbarWrapper\";\n\nvar DynamicUserForm =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(DynamicUserForm, _Component);\n\n  function DynamicUserForm(props) {\n    var _this;\n\n    _classCallCheck(this, DynamicUserForm);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(DynamicUserForm).call(this, props));\n    _this.state = {\n      snackOpened: false,\n      snackMessage: null,\n      snackType: null\n    };\n    _this.handleSubmit = _this.handleSubmit.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.handleSnackClose = _this.handleSnackClose.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    return _this;\n  }\n\n  _createClass(DynamicUserForm, [{\n    key: \"handleSnackClose\",\n    value: function handleSnackClose() {\n      this.setState({\n        snackOpened: !this.state.snackOpened\n      });\n    }\n  }, {\n    key: \"handleSubmit\",\n    value: function handleSubmit(event, data) {\n      var _this2 = this;\n\n      event.preventDefault();\n      var action = this.props.registerForm ? 'signup' : 'singin';\n      fetch(\"http://localhost:9999/auth/\".concat(action), {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify(data)\n      }).then(function (response) {\n        return response.json();\n      }).then(function (body) {\n        console.log(body.errors);\n\n        if (body.errors.length > 0) {\n          _this2.setState({\n            snackOpened: true,\n            snackType: \"error\",\n            snackMessage: _this2.props.registerForm ? 'Registration failed!' : 'Login failed!'\n          });\n        } else {\n          _this2.setState({\n            snackOpened: true,\n            snackType: \"success\",\n            snackMessage: _this2.props.registerForm ? 'Registration successful!' : 'Login successful!'\n          });\n        }\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return React.createElement(Grid, {\n        container: true,\n        spacing: 0 // alignItems=\"center\"\n        ,\n        justify: \"center\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 57\n        },\n        __self: this\n      }, React.createElement(Grid, {\n        container: true,\n        spacing: 0,\n        justify: \"center\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 63\n        },\n        __self: this\n      }, React.createElement(Grid, {\n        item: true,\n        xs: 10,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 64\n        },\n        __self: this\n      }, this.props.registerForm ? React.createElement(Register, {\n        handleSubmit: this.handleSubmit,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 67\n        },\n        __self: this\n      }) : React.createElement(Login, {\n        handleSubmit: this.handleSubmit,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 68\n        },\n        __self: this\n      }))), React.createElement(SnackbarWrapper, {\n        handleSnackClose: this.handleSnackClose,\n        snackOpened: this.state.snackOpened,\n        snackMessage: this.state.snackMessage,\n        snackType: this.state.snackType,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 72\n        },\n        __self: this\n      }));\n    }\n  }]);\n\n  return DynamicUserForm;\n}(Component);\n\nexport default DynamicUserForm;","map":{"version":3,"sources":["D:\\Softuni\\JS-Web\\ReactJS\\ExamProject\\react-app\\src\\components\\DynamicUserForm\\DynamicUserForm.jsx"],"names":["React","Component","Register","Login","Grid","Snackbar","IconButton","Close","CloseIcon","SnackbarWrapper","DynamicUserForm","props","state","snackOpened","snackMessage","snackType","handleSubmit","bind","handleSnackClose","setState","event","data","preventDefault","action","registerForm","fetch","method","headers","body","JSON","stringify","then","response","json","console","log","errors","length"],"mappings":"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","sourcesContent":["import React, {Component} from \"react\";\r\nimport Register from \"./Register/Register\";\r\nimport Login from \"./Login/Login\";\r\nimport {Grid, Snackbar, IconButton} from \"@material-ui/core\";\r\nimport {Close as CloseIcon} from '@material-ui/icons'\r\nimport SnackbarWrapper from \"../SnackbarWrapper/SnackbarWrapper\";\r\n\r\nclass DynamicUserForm extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            snackOpened: false,\r\n            snackMessage: null,\r\n            snackType: null\r\n        };\r\n\r\n        this.handleSubmit = this.handleSubmit.bind(this);\r\n        this.handleSnackClose = this.handleSnackClose.bind(this);\r\n    }\r\n\r\n    handleSnackClose() {\r\n        this.setState({snackOpened: !this.state.snackOpened})\r\n    }\r\n\r\n    handleSubmit(event, data) {\r\n        event.preventDefault();\r\n        const action = this.props.registerForm ? 'signup' : 'singin';\r\n\r\n        fetch(`http://localhost:9999/auth/${action}`, {\r\n            method: 'POST',\r\n            headers: {\r\n                'Content-Type': 'application/json'\r\n            },\r\n            body: JSON.stringify(data)\r\n        })\r\n            .then(response => response.json())\r\n            .then(body => {\r\n                console.log(body.errors);\r\n                if (body.errors.length > 0) {\r\n                    this.setState({\r\n                        snackOpened: true,\r\n                        snackType: \"error\",\r\n                        snackMessage: this.props.registerForm ? 'Registration failed!' : 'Login failed!'\r\n                    });\r\n                } else {\r\n                    this.setState({\r\n                        snackOpened: true,\r\n                        snackType: \"success\",\r\n                        snackMessage: this.props.registerForm ? 'Registration successful!' : 'Login successful!'\r\n                    });\r\n                }\r\n            });\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <Grid\r\n                container\r\n                spacing={0}\r\n                // alignItems=\"center\"\r\n                justify=\"center\"\r\n            >\r\n                <Grid container spacing={0} justify=\"center\">\r\n                    <Grid item xs={10}>\r\n                        {\r\n                            this.props.registerForm\r\n                                ? (<Register handleSubmit={this.handleSubmit}/>)\r\n                                : (<Login handleSubmit={this.handleSubmit}/>)\r\n                        }\r\n                    </Grid>\r\n                </Grid>\r\n                <SnackbarWrapper handleSnackClose={this.handleSnackClose} snackOpened={this.state.snackOpened}\r\n                                 snackMessage={this.state.snackMessage} snackType={this.state.snackType}/>\r\n            </Grid>\r\n        )\r\n    }\r\n}\r\n\r\nexport default DynamicUserForm;"]},"metadata":{},"sourceType":"module"}