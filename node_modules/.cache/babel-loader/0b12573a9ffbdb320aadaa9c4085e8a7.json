{"ast":null,"code":"import _classCallCheck from \"D:\\\\Softuni\\\\JS-Web\\\\ReactJS\\\\ExamProject\\\\react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"D:\\\\Softuni\\\\JS-Web\\\\ReactJS\\\\ExamProject\\\\react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"D:\\\\Softuni\\\\JS-Web\\\\ReactJS\\\\ExamProject\\\\react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"D:\\\\Softuni\\\\JS-Web\\\\ReactJS\\\\ExamProject\\\\react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"D:\\\\Softuni\\\\JS-Web\\\\ReactJS\\\\ExamProject\\\\react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nimport _assertThisInitialized from \"D:\\\\Softuni\\\\JS-Web\\\\ReactJS\\\\ExamProject\\\\react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/assertThisInitialized\";\nvar _jsxFileName = \"D:\\\\Softuni\\\\JS-Web\\\\ReactJS\\\\ExamProject\\\\react-app\\\\src\\\\App.js\";\nimport React, { Component, Fragment } from 'react';\nimport './App.css';\nimport { BrowserRouter, Redirect, Route, Switch } from 'react-router-dom';\nimport DynamicUserForm from './components/DynamicUserForm/DynamicUserForm';\nimport SnackbarWrapper from './components/SnackbarWrapper/SnackbarWrapper';\nimport Home from './components/Home/Home';\nimport Header from './components/Header/Header';\n\nvar App =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(App, _Component);\n\n  function App(props) {\n    var _this;\n\n    _classCallCheck(this, App);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(App).call(this, props));\n    _this.state = {\n      userEmail: null,\n      isAdmin: false,\n      isModerator: false,\n      snackOpened: false,\n      snackType: null,\n      snackMessage: null\n    };\n    _this.loginUser = _this.loginUser.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.logout = _this.logout.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.handleSnackClose = _this.handleSnackClose.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    return _this;\n  }\n\n  _createClass(App, [{\n    key: \"loginUser\",\n    value: function loginUser(event, user) {\n      var _this2 = this;\n\n      event.preventDefault();\n      fetch('http://localhost:9999/auth/signin', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify(user)\n      }).then(function (res) {\n        return res.json();\n      }).then(function (data) {\n        if (!data.email) {\n          _this2.setState({\n            snackOpened: true,\n            snackType: 'error',\n            snackMessage: 'Login failed!'\n          });\n        } else {\n          _this2.setState({\n            userEmail: data.email,\n            isAdmin: data.isAdmin,\n            isModerator: data.isModerator,\n            snackOpened: true,\n            snackType: 'success',\n            snackMessage: 'Login successful!'\n          });\n\n          sessionStorage.setItem('userId', data.userId);\n          sessionStorage.setItem('token', data.token);\n        }\n      });\n    }\n  }, {\n    key: \"logout\",\n    value: function logout() {\n      this.setState({\n        userEmail: null,\n        isAdmin: false,\n        isModerator: false,\n        snackOpened: true,\n        snackType: \"success\",\n        snackMessage: \"Logout successful!\"\n      });\n      sessionStorage.removeItem('userId');\n      sessionStorage.removeItem('token');\n    }\n  }, {\n    key: \"handleSnackClose\",\n    value: function handleSnackClose() {\n      this.setState({\n        snackOpened: false\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this3 = this;\n\n      return React.createElement(BrowserRouter, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 77\n        },\n        __self: this\n      }, React.createElement(Fragment, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 78\n        },\n        __self: this\n      }, React.createElement(Header, {\n        user: this.state.userEmail,\n        logout: this.logout,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 79\n        },\n        __self: this\n      }), React.createElement(Switch, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 80\n        },\n        __self: this\n      }, this.state.userEmail ? React.createElement(Fragment, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 83\n        },\n        __self: this\n      }, React.createElement(Redirect, {\n        to: \"/\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 84\n        },\n        __self: this\n      }), React.createElement(Route, {\n        exact: true,\n        path: \"/\",\n        render: function render() {\n          return React.createElement(Home, {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 85\n            },\n            __self: this\n          });\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 85\n        },\n        __self: this\n      })) : React.createElement(Fragment, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 88\n        },\n        __self: this\n      }, React.createElement(Redirect, {\n        to: \"/\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 89\n        },\n        __self: this\n      }), React.createElement(Route, {\n        exact: true,\n        path: \"/\",\n        render: function render() {\n          return React.createElement(Home, {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 90\n            },\n            __self: this\n          });\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 90\n        },\n        __self: this\n      }), React.createElement(Route, {\n        path: \"/register\",\n        render: function render() {\n          return React.createElement(DynamicUserForm, {\n            registerForm: true,\n            loginUser: _this3.loginUser,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 92\n            },\n            __self: this\n          });\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 91\n        },\n        __self: this\n      }), React.createElement(Route, {\n        path: \"/login\",\n        render: function render() {\n          return React.createElement(DynamicUserForm, {\n            registerForm: false,\n            loginUser: _this3.loginUser,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 95\n            },\n            __self: this\n          });\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 94\n        },\n        __self: this\n      }))), React.createElement(SnackbarWrapper, {\n        handleSnackClose: this.handleSnackClose,\n        snackOpened: this.state.snackOpened,\n        snackMessage: this.state.snackMessage,\n        snackType: this.state.snackType,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 101\n        },\n        __self: this\n      })));\n    }\n  }]);\n\n  return App;\n}(Component);\n\nexport default App;","map":{"version":3,"sources":["D:\\Softuni\\JS-Web\\ReactJS\\ExamProject\\react-app\\src\\App.js"],"names":["React","Component","Fragment","BrowserRouter","Redirect","Route","Switch","DynamicUserForm","SnackbarWrapper","Home","Header","App","props","state","userEmail","isAdmin","isModerator","snackOpened","snackType","snackMessage","loginUser","bind","logout","handleSnackClose","event","user","preventDefault","fetch","method","headers","body","JSON","stringify","then","res","json","data","email","setState","sessionStorage","setItem","userId","token","removeItem"],"mappings":";;;;;;;AAAA,OAAOA,KAAP,IAAeC,SAAf,EAA0BC,QAA1B,QAAyC,OAAzC;AACA,OAAO,WAAP;AACA,SAAQC,aAAR,EAAuBC,QAAvB,EAAiCC,KAAjC,EAAwCC,MAAxC,QAAqD,kBAArD;AACA,OAAOC,eAAP,MAA4B,8CAA5B;AACA,OAAOC,eAAP,MAA4B,8CAA5B;AACA,OAAOC,IAAP,MAAiB,wBAAjB;AACA,OAAOC,MAAP,MAAmB,4BAAnB;;IAEMC,G;;;;;AACF,eAAYC,KAAZ,EAAmB;AAAA;;AAAA;;AACf,6EAAMA,KAAN;AACA,UAAKC,KAAL,GAAa;AACTC,MAAAA,SAAS,EAAE,IADF;AAETC,MAAAA,OAAO,EAAE,KAFA;AAGTC,MAAAA,WAAW,EAAE,KAHJ;AAITC,MAAAA,WAAW,EAAE,KAJJ;AAKTC,MAAAA,SAAS,EAAE,IALF;AAMTC,MAAAA,YAAY,EAAE;AANL,KAAb;AASA,UAAKC,SAAL,GAAiB,MAAKA,SAAL,CAAeC,IAAf,uDAAjB;AACA,UAAKC,MAAL,GAAc,MAAKA,MAAL,CAAYD,IAAZ,uDAAd;AACA,UAAKE,gBAAL,GAAwB,MAAKA,gBAAL,CAAsBF,IAAtB,uDAAxB;AAbe;AAclB;;;;8BAESG,K,EAAOC,I,EAAM;AAAA;;AACnBD,MAAAA,KAAK,CAACE,cAAN;AACAC,MAAAA,KAAK,CAAC,mCAAD,EAAsC;AACvCC,QAAAA,MAAM,EAAE,MAD+B;AAEvCC,QAAAA,OAAO,EAAE;AACL,0BAAgB;AADX,SAF8B;AAKvCC,QAAAA,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAeP,IAAf;AALiC,OAAtC,CAAL,CAOKQ,IAPL,CAOU,UAAAC,GAAG;AAAA,eAAIA,GAAG,CAACC,IAAJ,EAAJ;AAAA,OAPb,EAQKF,IARL,CAQU,UAACG,IAAD,EAAU;AACZ,YAAI,CAACA,IAAI,CAACC,KAAV,EAAiB;AACb,UAAA,MAAI,CAACC,QAAL,CAAc;AACVrB,YAAAA,WAAW,EAAE,IADH;AAEVC,YAAAA,SAAS,EAAE,OAFD;AAGVC,YAAAA,YAAY,EAAE;AAHJ,WAAd;AAKH,SAND,MAMO;AACH,UAAA,MAAI,CAACmB,QAAL,CAAc;AACVxB,YAAAA,SAAS,EAAEsB,IAAI,CAACC,KADN;AAEVtB,YAAAA,OAAO,EAAEqB,IAAI,CAACrB,OAFJ;AAGVC,YAAAA,WAAW,EAAEoB,IAAI,CAACpB,WAHR;AAIVC,YAAAA,WAAW,EAAE,IAJH;AAKVC,YAAAA,SAAS,EAAE,SALD;AAMVC,YAAAA,YAAY,EAAE;AANJ,WAAd;;AAQAoB,UAAAA,cAAc,CAACC,OAAf,CAAuB,QAAvB,EAAiCJ,IAAI,CAACK,MAAtC;AACAF,UAAAA,cAAc,CAACC,OAAf,CAAuB,OAAvB,EAAgCJ,IAAI,CAACM,KAArC;AACH;AACJ,OA3BL;AA4BH;;;6BAEQ;AACL,WAAKJ,QAAL,CAAc;AACVxB,QAAAA,SAAS,EAAE,IADD;AAEVC,QAAAA,OAAO,EAAE,KAFC;AAGVC,QAAAA,WAAW,EAAE,KAHH;AAIVC,QAAAA,WAAW,EAAE,IAJH;AAKVC,QAAAA,SAAS,EAAE,SALD;AAMVC,QAAAA,YAAY,EAAE;AANJ,OAAd;AAQAoB,MAAAA,cAAc,CAACI,UAAf,CAA0B,QAA1B;AACAJ,MAAAA,cAAc,CAACI,UAAf,CAA0B,OAA1B;AACH;;;uCAEkB;AACf,WAAKL,QAAL,CAAc;AAACrB,QAAAA,WAAW,EAAE;AAAd,OAAd;AACH;;;6BAEQ;AAAA;;AACL,aACI,oBAAC,aAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACI,oBAAC,QAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACI,oBAAC,MAAD;AAAQ,QAAA,IAAI,EAAE,KAAKJ,KAAL,CAAWC,SAAzB;AAAoC,QAAA,MAAM,EAAE,KAAKQ,MAAjD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADJ,EAEI,oBAAC,MAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAEY,KAAKT,KAAL,CAAWC,SAAX,GACM,oBAAC,QAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE,oBAAC,QAAD;AAAU,QAAA,EAAE,EAAC,GAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADF,EAEE,oBAAC,KAAD;AAAO,QAAA,KAAK,MAAZ;AAAa,QAAA,IAAI,EAAC,GAAlB;AAAsB,QAAA,MAAM,EAAE;AAAA,iBAAM,oBAAC,IAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YAAN;AAAA,SAA9B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAFF,CADN,GAMM,oBAAC,QAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE,oBAAC,QAAD;AAAU,QAAA,EAAE,EAAC,GAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADF,EAEE,oBAAC,KAAD;AAAO,QAAA,KAAK,MAAZ;AAAa,QAAA,IAAI,EAAC,GAAlB;AAAsB,QAAA,MAAM,EAAE;AAAA,iBAAM,oBAAC,IAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YAAN;AAAA,SAA9B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAFF,EAGE,oBAAC,KAAD;AAAO,QAAA,IAAI,EAAC,WAAZ;AAAwB,QAAA,MAAM,EAAE;AAAA,iBAC5B,oBAAC,eAAD;AAAiB,YAAA,YAAY,EAAE,IAA/B;AAAqC,YAAA,SAAS,EAAE,MAAI,CAACM,SAArD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YAD4B;AAAA,SAAhC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAHF,EAME,oBAAE,KAAF;AAAQ,QAAA,IAAI,EAAC,QAAb;AAAsB,QAAA,MAAM,EAAE;AAAA,iBAC1B,oBAAC,eAAD;AAAiB,YAAA,YAAY,EAAE,KAA/B;AAAsC,YAAA,SAAS,EAAE,MAAI,CAACA,SAAtD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YAD0B;AAAA,SAA9B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QANF,CARlB,CAFJ,EAuBI,oBAAC,eAAD;AAAiB,QAAA,gBAAgB,EAAE,KAAKG,gBAAxC;AAA0D,QAAA,WAAW,EAAE,KAAKV,KAAL,CAAWI,WAAlF;AACiB,QAAA,YAAY,EAAE,KAAKJ,KAAL,CAAWM,YAD1C;AACwD,QAAA,SAAS,EAAE,KAAKN,KAAL,CAAWK,SAD9E;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAvBJ,CADJ,CADJ;AA8BH;;;;EAjGajB,S;;AAoGlB,eAAeU,GAAf","sourcesContent":["import React, {Component, Fragment} from 'react';\nimport './App.css';\nimport {BrowserRouter, Redirect, Route, Switch} from 'react-router-dom';\nimport DynamicUserForm from './components/DynamicUserForm/DynamicUserForm';\nimport SnackbarWrapper from './components/SnackbarWrapper/SnackbarWrapper';\nimport Home from './components/Home/Home';\nimport Header from './components/Header/Header';\n\nclass App extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            userEmail: null,\n            isAdmin: false,\n            isModerator: false,\n            snackOpened: false,\n            snackType: null,\n            snackMessage: null,\n        };\n\n        this.loginUser = this.loginUser.bind(this);\n        this.logout = this.logout.bind(this);\n        this.handleSnackClose = this.handleSnackClose.bind(this);\n    }\n\n    loginUser(event, user) {\n        event.preventDefault();\n        fetch('http://localhost:9999/auth/signin', {\n            method: 'POST',\n            headers: {\n                'Content-Type': 'application/json'\n            },\n            body: JSON.stringify(user)\n        })\n            .then(res => res.json())\n            .then((data) => {\n                if (!data.email) {\n                    this.setState({\n                        snackOpened: true,\n                        snackType: 'error',\n                        snackMessage: 'Login failed!',\n                    });\n                } else {\n                    this.setState({\n                        userEmail: data.email,\n                        isAdmin: data.isAdmin,\n                        isModerator: data.isModerator,\n                        snackOpened: true,\n                        snackType: 'success',\n                        snackMessage: 'Login successful!',\n                    });\n                    sessionStorage.setItem('userId', data.userId);\n                    sessionStorage.setItem('token', data.token);\n                }\n            })\n    }\n\n    logout() {\n        this.setState({\n            userEmail: null,\n            isAdmin: false,\n            isModerator: false,\n            snackOpened: true,\n            snackType: \"success\",\n            snackMessage: \"Logout successful!\",\n        });\n        sessionStorage.removeItem('userId');\n        sessionStorage.removeItem('token');\n    }\n\n    handleSnackClose() {\n        this.setState({snackOpened: false});\n    }\n\n    render() {\n        return (\n            <BrowserRouter>\n                <Fragment>\n                    <Header user={this.state.userEmail} logout={this.logout}/>\n                    <Switch>\n                            {\n                                this.state.userEmail\n                                    ? <Fragment>\n                                        <Redirect to=\"/\"/>\n                                        <Route exact path=\"/\" render={() => <Home/>}/>\n                                        {/*<Route render={() => <h3>Not Found</h3>}/>*/}\n                                    </Fragment>\n                                    : <Fragment>\n                                        <Redirect to=\"/\"/>\n                                        <Route exact path=\"/\" render={() => <Home/>}/>\n                                        <Route path=\"/register\" render={() =>\n                                            <DynamicUserForm registerForm={true} loginUser={this.loginUser}/>}\n                                        />\n                                        < Route path=\"/login\" render={() =>\n                                            <DynamicUserForm registerForm={false} loginUser={this.loginUser}/>}/>\n                                        {/*<Redirect to=\"/\"/>*/}\n                                    </Fragment>\n                            }\n                    </Switch>\n\n                    <SnackbarWrapper handleSnackClose={this.handleSnackClose} snackOpened={this.state.snackOpened}\n                                     snackMessage={this.state.snackMessage} snackType={this.state.snackType}/>\n                </Fragment>\n            </BrowserRouter>\n        );\n    }\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}