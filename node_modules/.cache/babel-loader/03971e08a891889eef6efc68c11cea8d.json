{"ast":null,"code":"import _classCallCheck from \"D:\\\\Softuni\\\\JS-Web\\\\ReactJS\\\\ExamProject\\\\react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"D:\\\\Softuni\\\\JS-Web\\\\ReactJS\\\\ExamProject\\\\react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"D:\\\\Softuni\\\\JS-Web\\\\ReactJS\\\\ExamProject\\\\react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"D:\\\\Softuni\\\\JS-Web\\\\ReactJS\\\\ExamProject\\\\react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"D:\\\\Softuni\\\\JS-Web\\\\ReactJS\\\\ExamProject\\\\react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nimport _assertThisInitialized from \"D:\\\\Softuni\\\\JS-Web\\\\ReactJS\\\\ExamProject\\\\react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/assertThisInitialized\";\nvar _jsxFileName = \"D:\\\\Softuni\\\\JS-Web\\\\ReactJS\\\\ExamProject\\\\react-app\\\\src\\\\App.js\";\nimport React, { Component, Fragment } from 'react';\nimport './App.css';\nimport { BrowserRouter, Route, Switch } from 'react-router-dom';\nimport NavBar from './components/NavBar/NavBar';\nimport DynamicUserForm from './components/DynamicUserForm/DynamicUserForm';\nimport SnackbarWrapper from './components/SnackbarWrapper/SnackbarWrapper';\nimport Home from './components/Home/Home';\n\nvar App =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(App, _Component);\n\n  function App(props) {\n    var _this;\n\n    _classCallCheck(this, App);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(App).call(this, props));\n    _this.state = {\n      userEmail: null,\n      isAdmin: false,\n      isModerator: false,\n      snackOpened: false,\n      snackType: null,\n      snackMessage: null\n    };\n    _this.loginUser = _this.loginUser.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.handleSnackClose = _this.handleSnackClose.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    return _this;\n  }\n\n  _createClass(App, [{\n    key: \"loginUser\",\n    value: function loginUser(event, user) {\n      var _this2 = this;\n\n      event.preventDefault();\n      fetch('http://localhost:9999/auth/signin', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify(user)\n      }).then(function (res) {\n        return res.json();\n      }).then(function (data) {\n        if (!data.email) {\n          _this2.setState({\n            snackOpened: true,\n            snackType: 'error',\n            snackMessage: 'Login failed!'\n          });\n        } else {\n          _this2.setState({\n            userEmail: data.userEmail,\n            isAdmin: data.isAdmin,\n            isModerator: data.isModerator,\n            snackOpened: true,\n            snackType: 'success',\n            snackMessage: 'Login successful!'\n          });\n\n          console.log(data);\n          sessionStorage.setItem('userId', data.userId);\n          sessionStorage.setItem('token', data.token);\n        }\n      });\n    }\n  }, {\n    key: \"handleSnackClose\",\n    value: function handleSnackClose() {\n      this.setState({\n        snackOpened: false\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this3 = this;\n\n      return React.createElement(BrowserRouter, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 64\n        },\n        __self: this\n      }, React.createElement(Fragment, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 65\n        },\n        __self: this\n      }, React.createElement(\"header\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 66\n        },\n        __self: this\n      }, React.createElement(NavBar, {\n        user: function () {\n          return _this3.state.userEmail;\n        }(),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 67\n        },\n        __self: this\n      })), React.createElement(Switch, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 69\n        },\n        __self: this\n      }, this.state.userEmail ? React.createElement(Route, {\n        path: \"/\",\n        exact: true,\n        render: function render() {\n          return React.createElement(Home, {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 73\n            },\n            __self: this\n          });\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 73\n        },\n        __self: this\n      }) : React.createElement(Fragment, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 74\n        },\n        __self: this\n      }, React.createElement(Route, {\n        path: \"/register\",\n        render: function render() {\n          return React.createElement(DynamicUserForm, {\n            registerForm: true,\n            loginUser: _this3.loginUser,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 76\n            },\n            __self: this\n          });\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 75\n        },\n        __self: this\n      }), React.createElement(Route, {\n        path: \"/login\",\n        render: function render() {\n          return React.createElement(DynamicUserForm, {\n            registerForm: false,\n            loginUser: _this3.loginUser,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 79\n            },\n            __self: this\n          });\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 78\n        },\n        __self: this\n      }))), React.createElement(SnackbarWrapper, {\n        handleSnackClose: this.handleSnackClose,\n        snackOpened: this.state.snackOpened,\n        snackMessage: this.state.snackMessage,\n        snackType: this.state.snackType,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 86\n        },\n        __self: this\n      })));\n    }\n  }]);\n\n  return App;\n}(Component);\n\nexport default App;","map":{"version":3,"sources":["D:\\Softuni\\JS-Web\\ReactJS\\ExamProject\\react-app\\src\\App.js"],"names":["React","Component","Fragment","BrowserRouter","Route","Switch","NavBar","DynamicUserForm","SnackbarWrapper","Home","App","props","state","userEmail","isAdmin","isModerator","snackOpened","snackType","snackMessage","loginUser","bind","handleSnackClose","event","user","preventDefault","fetch","method","headers","body","JSON","stringify","then","res","json","data","email","setState","console","log","sessionStorage","setItem","userId","token"],"mappings":";;;;;;;AAAA,OAAOA,KAAP,IAAeC,SAAf,EAA0BC,QAA1B,QAAyC,OAAzC;AACA,OAAO,WAAP;AACA,SAAQC,aAAR,EAAuBC,KAAvB,EAA8BC,MAA9B,QAA2C,kBAA3C;AACA,OAAOC,MAAP,MAAmB,4BAAnB;AACA,OAAOC,eAAP,MAA4B,8CAA5B;AACA,OAAOC,eAAP,MAA4B,8CAA5B;AACA,OAAOC,IAAP,MAAiB,wBAAjB;;IAEMC,G;;;;;AACF,eAAYC,KAAZ,EAAmB;AAAA;;AAAA;;AACf,6EAAMA,KAAN;AACA,UAAKC,KAAL,GAAa;AACTC,MAAAA,SAAS,EAAE,IADF;AAETC,MAAAA,OAAO,EAAE,KAFA;AAGTC,MAAAA,WAAW,EAAE,KAHJ;AAITC,MAAAA,WAAW,EAAE,KAJJ;AAKTC,MAAAA,SAAS,EAAE,IALF;AAMTC,MAAAA,YAAY,EAAE;AANL,KAAb;AASA,UAAKC,SAAL,GAAiB,MAAKA,SAAL,CAAeC,IAAf,uDAAjB;AACA,UAAKC,gBAAL,GAAwB,MAAKA,gBAAL,CAAsBD,IAAtB,uDAAxB;AAZe;AAalB;;;;8BAESE,K,EAAOC,I,EAAM;AAAA;;AACnBD,MAAAA,KAAK,CAACE,cAAN;AACAC,MAAAA,KAAK,CAAC,mCAAD,EAAsC;AACvCC,QAAAA,MAAM,EAAE,MAD+B;AAEvCC,QAAAA,OAAO,EAAE;AACL,0BAAgB;AADX,SAF8B;AAKvCC,QAAAA,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAeP,IAAf;AALiC,OAAtC,CAAL,CAOKQ,IAPL,CAOU,UAAAC,GAAG;AAAA,eAAIA,GAAG,CAACC,IAAJ,EAAJ;AAAA,OAPb,EAQKF,IARL,CAQU,UAACG,IAAD,EAAU;AACZ,YAAI,CAACA,IAAI,CAACC,KAAV,EAAiB;AACb,UAAA,MAAI,CAACC,QAAL,CAAc;AACVpB,YAAAA,WAAW,EAAE,IADH;AAEVC,YAAAA,SAAS,EAAE,OAFD;AAGVC,YAAAA,YAAY,EAAE;AAHJ,WAAd;AAKH,SAND,MAMO;AACH,UAAA,MAAI,CAACkB,QAAL,CAAc;AACVvB,YAAAA,SAAS,EAAEqB,IAAI,CAACrB,SADN;AAEVC,YAAAA,OAAO,EAAEoB,IAAI,CAACpB,OAFJ;AAGVC,YAAAA,WAAW,EAAEmB,IAAI,CAACnB,WAHR;AAIVC,YAAAA,WAAW,EAAE,IAJH;AAKVC,YAAAA,SAAS,EAAE,SALD;AAMVC,YAAAA,YAAY,EAAE;AANJ,WAAd;;AAQAmB,UAAAA,OAAO,CAACC,GAAR,CAAYJ,IAAZ;AACAK,UAAAA,cAAc,CAACC,OAAf,CAAuB,QAAvB,EAAiCN,IAAI,CAACO,MAAtC;AACAF,UAAAA,cAAc,CAACC,OAAf,CAAuB,OAAvB,EAAgCN,IAAI,CAACQ,KAArC;AACH;AACJ,OA5BL;AA6BH;;;uCAEkB;AACf,WAAKN,QAAL,CAAc;AAACpB,QAAAA,WAAW,EAAE;AAAd,OAAd;AACH;;;6BAEQ;AAAA;;AACL,aACI,oBAAC,aAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACI,oBAAC,QAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACI,oBAAC,MAAD;AAAQ,QAAA,IAAI,EAAG;AAAA,iBAAM,MAAI,CAACJ,KAAL,CAAWC,SAAjB;AAAA,SAAD,EAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADJ,CADJ,EAII,oBAAC,MAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAEQ,KAAKD,KAAL,CAAWC,SAAX,GAEI,oBAAC,KAAD;AAAO,QAAA,IAAI,EAAC,GAAZ;AAAgB,QAAA,KAAK,MAArB;AAAsB,QAAA,MAAM,EAAE;AAAA,iBAAM,oBAAC,IAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YAAN;AAAA,SAA9B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAFJ,GAGM,oBAAC,QAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE,oBAAC,KAAD;AAAO,QAAA,IAAI,EAAC,WAAZ;AAAwB,QAAA,MAAM,EAAE;AAAA,iBAC5B,oBAAC,eAAD;AAAiB,YAAA,YAAY,EAAE,IAA/B;AAAqC,YAAA,SAAS,EAAE,MAAI,CAACM,SAArD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YAD4B;AAAA,SAAhC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADF,EAIE,oBAAC,KAAD;AAAO,QAAA,IAAI,EAAC,QAAZ;AAAqB,QAAA,MAAM,EAAE;AAAA,iBACzB,oBAAC,eAAD;AAAiB,YAAA,YAAY,EAAE,KAA/B;AAAsC,YAAA,SAAS,EAAE,MAAI,CAACA,SAAtD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YADyB;AAAA,SAA7B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAJF,CALd,CAJJ,EAqBI,oBAAC,eAAD;AAAiB,QAAA,gBAAgB,EAAE,KAAKE,gBAAxC;AAA0D,QAAA,WAAW,EAAE,KAAKT,KAAL,CAAWI,WAAlF;AACiB,QAAA,YAAY,EAAE,KAAKJ,KAAL,CAAWM,YAD1C;AACwD,QAAA,SAAS,EAAE,KAAKN,KAAL,CAAWK,SAD9E;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QArBJ,CADJ,CADJ;AA4BH;;;;EAlFahB,S;;AAqFlB,eAAeS,GAAf","sourcesContent":["import React, {Component, Fragment} from 'react';\nimport './App.css';\nimport {BrowserRouter, Route, Switch} from 'react-router-dom';\nimport NavBar from './components/NavBar/NavBar';\nimport DynamicUserForm from './components/DynamicUserForm/DynamicUserForm';\nimport SnackbarWrapper from './components/SnackbarWrapper/SnackbarWrapper';\nimport Home from './components/Home/Home';\n\nclass App extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            userEmail: null,\n            isAdmin: false,\n            isModerator: false,\n            snackOpened: false,\n            snackType: null,\n            snackMessage: null,\n        };\n\n        this.loginUser = this.loginUser.bind(this);\n        this.handleSnackClose = this.handleSnackClose.bind(this);\n    }\n\n    loginUser(event, user) {\n        event.preventDefault();\n        fetch('http://localhost:9999/auth/signin', {\n            method: 'POST',\n            headers: {\n                'Content-Type': 'application/json'\n            },\n            body: JSON.stringify(user)\n        })\n            .then(res => res.json())\n            .then((data) => {\n                if (!data.email) {\n                    this.setState({\n                        snackOpened: true,\n                        snackType: 'error',\n                        snackMessage: 'Login failed!',\n                    });\n                } else {\n                    this.setState({\n                        userEmail: data.userEmail,\n                        isAdmin: data.isAdmin,\n                        isModerator: data.isModerator,\n                        snackOpened: true,\n                        snackType: 'success',\n                        snackMessage: 'Login successful!',\n                    });\n                    console.log(data)\n                    sessionStorage.setItem('userId', data.userId);\n                    sessionStorage.setItem('token', data.token);\n                }\n            })\n    }\n\n    handleSnackClose() {\n        this.setState({snackOpened: false})\n    }\n\n    render() {\n        return (\n            <BrowserRouter>\n                <Fragment>\n                    <header>\n                        <NavBar user={(() => this.state.userEmail)()}/>\n                    </header>\n                    <Switch>\n                        {\n                            this.state.userEmail\n                                ?\n                                <Route path=\"/\" exact render={() => <Home/>}/>\n                                : <Fragment>\n                                    <Route path=\"/register\" render={() =>\n                                        <DynamicUserForm registerForm={true} loginUser={this.loginUser}/>}\n                                    />\n                                    <Route path=\"/login\" render={() =>\n                                        <DynamicUserForm registerForm={false} loginUser={this.loginUser}/>}\n                                    />\n                                </Fragment>\n                        }\n\n                    </Switch>\n\n                    <SnackbarWrapper handleSnackClose={this.handleSnackClose} snackOpened={this.state.snackOpened}\n                                     snackMessage={this.state.snackMessage} snackType={this.state.snackType}/>\n                </Fragment>\n            </BrowserRouter>\n        );\n    }\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}