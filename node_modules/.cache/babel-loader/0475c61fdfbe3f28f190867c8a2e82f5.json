{"ast":null,"code":"import _classCallCheck from \"D:\\\\Softuni\\\\JS-Web\\\\ReactJS\\\\ExamProject\\\\react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"D:\\\\Softuni\\\\JS-Web\\\\ReactJS\\\\ExamProject\\\\react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"D:\\\\Softuni\\\\JS-Web\\\\ReactJS\\\\ExamProject\\\\react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"D:\\\\Softuni\\\\JS-Web\\\\ReactJS\\\\ExamProject\\\\react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"D:\\\\Softuni\\\\JS-Web\\\\ReactJS\\\\ExamProject\\\\react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nimport _assertThisInitialized from \"D:\\\\Softuni\\\\JS-Web\\\\ReactJS\\\\ExamProject\\\\react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/assertThisInitialized\";\nvar _jsxFileName = \"D:\\\\Softuni\\\\JS-Web\\\\ReactJS\\\\ExamProject\\\\react-app\\\\src\\\\App.js\";\nimport React, { Component, Fragment } from 'react';\nimport { BrowserRouter, Redirect, Route, Switch } from 'react-router-dom';\nimport Grid from \"@material-ui/core/Grid\";\nimport './App.css';\nimport DynamicUserForm from './components/DynamicUserForm/DynamicUserForm';\nimport SnackbarWrapper from './components/SnackbarWrapper/SnackbarWrapper';\nimport Home from './components/Home/Home';\nimport Header from './components/Header/Header';\nimport DynamicAddForm from \"./components/DynamicAddForm/DynamicAddForm\";\n\nvar App =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(App, _Component);\n\n  function App(props) {\n    var _this;\n\n    _classCallCheck(this, App);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(App).call(this, props));\n    _this.state = {\n      userEmail: null,\n      isAdmin: false,\n      isModerator: false,\n      snackOpened: false,\n      snackType: null,\n      snackMessage: null,\n      mainGridSize: 12\n    };\n    _this.loginUser = _this.loginUser.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.logout = _this.logout.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.handleSnackClose = _this.handleSnackClose.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.toggleMainGridSize = _this.toggleMainGridSize.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    return _this;\n  }\n\n  _createClass(App, [{\n    key: \"loginUser\",\n    value: function loginUser(user) {\n      var _this2 = this;\n\n      fetch('http://localhost:9999/auth/signin', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify(user)\n      }).then(function (res) {\n        return res.json();\n      }).then(function (data) {\n        if (!data.email) {\n          console.log(data);\n\n          _this2.setState({\n            snackOpened: true,\n            snackType: 'error',\n            snackMessage: 'Login failed!'\n          });\n        } else {\n          _this2.setState({\n            userEmail: data.email,\n            isAdmin: data.isAdmin,\n            isModerator: data.isModerator,\n            snackOpened: true,\n            snackType: 'success',\n            snackMessage: 'Login successful!'\n          });\n\n          sessionStorage.setItem('userId', data.userId);\n          sessionStorage.setItem('token', data.token);\n        }\n      });\n    }\n  }, {\n    key: \"logout\",\n    value: function logout() {\n      this.setState({\n        userEmail: null,\n        isAdmin: false,\n        isModerator: false,\n        snackOpened: true,\n        snackType: \"success\",\n        snackMessage: \"Logout successful!\"\n      });\n      sessionStorage.removeItem('userId');\n      sessionStorage.removeItem('token');\n    }\n  }, {\n    key: \"handleSnackClose\",\n    value: function handleSnackClose() {\n      this.setState({\n        snackOpened: false\n      });\n    }\n  }, {\n    key: \"toggleMainGridSize\",\n    value: function toggleMainGridSize() {\n      if (this.state.mainGridSize === 9) {\n        this.setState({\n          mainGridSize: 12\n        });\n      } else {\n        this.setState({\n          mainGridSize: 9\n        });\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this3 = this;\n\n      return React.createElement(BrowserRouter, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 89\n        },\n        __self: this\n      }, React.createElement(Fragment, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 90\n        },\n        __self: this\n      }, React.createElement(Header, {\n        user: this.state.userEmail,\n        logout: this.logout,\n        toggleMainGridSize: this.toggleMainGridSize,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 91\n        },\n        __self: this\n      }), React.createElement(Grid, {\n        container: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 93\n        },\n        __self: this\n      }, React.createElement(Grid, {\n        item: true,\n        xs: this.state.mainGridSize === 9 ? 3 : false,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 94\n        },\n        __self: this\n      }), React.createElement(Grid, {\n        item: true,\n        xs: this.state.mainGridSize,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 95\n        },\n        __self: this\n      }, React.createElement(\"main\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 96\n        },\n        __self: this\n      }, React.createElement(Switch, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 97\n        },\n        __self: this\n      }, React.createElement(Route, {\n        exact: true,\n        path: \"/\",\n        render: function render() {\n          return React.createElement(Home, {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 98\n            },\n            __self: this\n          });\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 98\n        },\n        __self: this\n      }), this.state.isAdmin || this.state.isModerator ? React.createElement(Route, {\n        path: \"/add/flavour\",\n        render: function render() {\n          return React.createElement(DynamicAddForm, {\n            formType: \"flavour\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 102\n            },\n            __self: this\n          });\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 101\n        },\n        __self: this\n      }) : null, this.state.userEmail !== null ? React.createElement(Redirect, {\n        to: \"/\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 107\n        },\n        __self: this\n      }) : null, React.createElement(Route, {\n        path: \"/register\",\n        render: function render() {\n          return React.createElement(DynamicUserForm, {\n            registerForm: true,\n            loginUser: _this3.loginUser,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 111\n            },\n            __self: this\n          });\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 110\n        },\n        __self: this\n      }), React.createElement(Route, {\n        path: \"/login\",\n        render: function render() {\n          return React.createElement(DynamicUserForm, {\n            registerForm: false,\n            loginUser: _this3.loginUser,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 114\n            },\n            __self: this\n          });\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 113\n        },\n        __self: this\n      }), React.createElement(Redirect, {\n        to: \"/\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 116\n        },\n        __self: this\n      })), React.createElement(SnackbarWrapper, {\n        handleSnackClose: this.handleSnackClose,\n        snackOpened: this.state.snackOpened,\n        snackMessage: this.state.snackMessage,\n        snackType: this.state.snackType,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 119\n        },\n        __self: this\n      }))))));\n    }\n  }]);\n\n  return App;\n}(Component);\n\nexport default App;","map":{"version":3,"sources":["D:\\Softuni\\JS-Web\\ReactJS\\ExamProject\\react-app\\src\\App.js"],"names":["React","Component","Fragment","BrowserRouter","Redirect","Route","Switch","Grid","DynamicUserForm","SnackbarWrapper","Home","Header","DynamicAddForm","App","props","state","userEmail","isAdmin","isModerator","snackOpened","snackType","snackMessage","mainGridSize","loginUser","bind","logout","handleSnackClose","toggleMainGridSize","user","fetch","method","headers","body","JSON","stringify","then","res","json","data","email","console","log","setState","sessionStorage","setItem","userId","token","removeItem"],"mappings":"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","sourcesContent":["import React, {Component, Fragment} from 'react';\nimport {BrowserRouter, Redirect, Route, Switch} from 'react-router-dom';\nimport Grid from \"@material-ui/core/Grid\";\nimport './App.css';\nimport DynamicUserForm from './components/DynamicUserForm/DynamicUserForm';\nimport SnackbarWrapper from './components/SnackbarWrapper/SnackbarWrapper';\nimport Home from './components/Home/Home';\nimport Header from './components/Header/Header';\nimport DynamicAddForm from \"./components/DynamicAddForm/DynamicAddForm\";\n\nclass App extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            userEmail: null,\n            isAdmin: false,\n            isModerator: false,\n            snackOpened: false,\n            snackType: null,\n            snackMessage: null,\n            mainGridSize: 12,\n        };\n\n        this.loginUser = this.loginUser.bind(this);\n        this.logout = this.logout.bind(this);\n        this.handleSnackClose = this.handleSnackClose.bind(this);\n        this.toggleMainGridSize = this.toggleMainGridSize.bind(this);\n    }\n\n    loginUser(user) {\n        fetch('http://localhost:9999/auth/signin', {\n            method: 'POST',\n            headers: {\n                'Content-Type': 'application/json'\n            },\n            body: JSON.stringify(user)\n        })\n            .then(res => res.json())\n            .then((data) => {\n                if (!data.email) {\n                    console.log(data)\n                    this.setState({\n                        snackOpened: true,\n                        snackType: 'error',\n                        snackMessage: 'Login failed!',\n                    });\n                } else {\n                    this.setState({\n                        userEmail: data.email,\n                        isAdmin: data.isAdmin,\n                        isModerator: data.isModerator,\n                        snackOpened: true,\n                        snackType: 'success',\n                        snackMessage: 'Login successful!',\n                    });\n                    sessionStorage.setItem('userId', data.userId);\n                    sessionStorage.setItem('token', data.token);\n                }\n            })\n    }\n\n    logout() {\n        this.setState({\n            userEmail: null,\n            isAdmin: false,\n            isModerator: false,\n            snackOpened: true,\n            snackType: \"success\",\n            snackMessage: \"Logout successful!\",\n        });\n        sessionStorage.removeItem('userId');\n        sessionStorage.removeItem('token');\n    }\n\n    handleSnackClose() {\n        this.setState({snackOpened: false});\n    }\n\n    toggleMainGridSize() {\n        if (this.state.mainGridSize === 9) {\n            this.setState({mainGridSize: 12});\n        } else {\n            this.setState({mainGridSize: 9});\n        }\n    }\n\n    render() {\n        return (\n            <BrowserRouter>\n                <Fragment>\n                    <Header user={this.state.userEmail} logout={this.logout}\n                            toggleMainGridSize={this.toggleMainGridSize}/>\n                    <Grid container>\n                        <Grid item xs={this.state.mainGridSize === 9 ? 3 : false}/>\n                        <Grid item xs={this.state.mainGridSize}>\n                            <main>\n                                <Switch>\n                                    <Route exact path=\"/\" render={() => <Home/>}/>\n                                    {\n                                        (this.state.isAdmin || this.state.isModerator)\n                                            ? <Route path=\"/add/flavour\" render={() =>\n                                                <DynamicAddForm formType={\"flavour\"}/>\n                                            }/>\n                                            : null}\n                                    {\n                                        this.state.userEmail !== null\n                                            ? <Redirect to=\"/\"/>\n                                            : null\n                                    }\n                                    <Route path=\"/register\" render={() =>\n                                        <DynamicUserForm registerForm={true} loginUser={this.loginUser}/>}\n                                    />\n                                    < Route path=\"/login\" render={() =>\n                                        <DynamicUserForm registerForm={false} loginUser={this.loginUser}/>}\n                                    />\n                                    <Redirect to=\"/\"/>\n                                </Switch>\n\n                                <SnackbarWrapper handleSnackClose={this.handleSnackClose}\n                                                 snackOpened={this.state.snackOpened}\n                                                 snackMessage={this.state.snackMessage}\n                                                 snackType={this.state.snackType}/>\n                            </main>\n                        </Grid></Grid>\n                </Fragment>\n            </BrowserRouter>\n        );\n    }\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}